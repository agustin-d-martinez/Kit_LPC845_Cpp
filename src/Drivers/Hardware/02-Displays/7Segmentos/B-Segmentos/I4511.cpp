/*******************************************************************************************************************************//**
 *
 * @file		I4511.cpp
 * @brief		Objeto de control del integrado I4511
 * @date		27 jul. 2022
 * @author		Ing. Marcelo Trujillo
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include <Hardware/02-Displays/7Segmentos/B-Segmentos/I4511.h>

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** IMPLEMENTACION DE LOS METODODS DE LA CLASE
 **********************************************************************************************************************************/
/**
 * \fn void I4511::SetSegmentos( uint16_t valor )
 * \brief Función de escritura del segmento.
 * \details Escribe el segmento en formato binario.
 * \param [in] valor: valor a escribir.
 * \return void
*/
void I4511::SetSegmentos( uint16_t valor )
{
	if ( ! ( valor & 1 ) )
		m_bcd[ 0 ]->ClrPin();
	else
		m_bcd[ 0 ]->SetPin();

	if ( ! (( valor >> 1 )  & 1 ) )
		m_bcd[ 1 ]->ClrPin();
	else
		m_bcd[ 1 ]->SetPin();

	if ( ! (( valor >> 2 )  & 1 ) )
		m_bcd[ 2 ]->ClrPin();
	else
		m_bcd[ 2 ]->SetPin();

	if ( ! (( valor >> 3 )  & 1 ) )
		m_bcd[ 3 ]->ClrPin();
	else
		m_bcd[ 3 ]->SetPin();
}
/**
 * \fn void I4511::Inicializar ( void )
 * \brief Función de Inicialización del I4511.
 * \details
 * \return void
*/
void I4511::Inicializar ( void )
{
	for ( uint8_t j = 0 ; j < m_bcd.size() ; j++)
		m_bcd[j]->SetDir( ) ;
}
