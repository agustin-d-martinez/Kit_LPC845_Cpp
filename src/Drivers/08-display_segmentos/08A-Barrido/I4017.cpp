/*******************************************************************************************************************************//**
 *
 * @file		I4017.cpp
 * @brief		Objeto de control del integrado I4017
 * @date		27 jul. 2022
 * @author		Ing. Marcelo Trujillo
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include <I4017.h>

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** IMPLEMENTACION DE LOS METODODS DE LA CLASE
 **********************************************************************************************************************************/
/**
 * \fn void I4017::SetReset( void )
 * \brief Resetea el I4017.
 * \details El I4017 vuelve al valor 0 de salida por enviar un pulso a la pata de Reset.
 * \return void
*/
void I4017::SetReset( void )
{
	m_pins4017[ 0 ]->ClrPin( );
	m_pins4017[ 0 ]->SetPin( );	m_pins4017[ 0 ]->ClrPin( );

	m_indice = 0;
}
/**
 * \fn void I4017::SetClock( void )
 * \brief Enciende la pata clock.
 * \details El I4017 aumenta en 1 la salida al recibir un pulso de clock.
 * \return void
*/
void I4017::SetClock( void )
{
	m_pins4017[ 0 ]->ClrPin( );

	m_pins4017[ 1 ]->SetPin( );
	m_pins4017[ 1 ]->SetPin( );
	m_pins4017[ 1 ]->ClrPin( );
}
/**
 * \fn void I4017::SetDigito( void )
 * \brief Función de cambio en el barrido.
 * \details Se mueve 1 en el barrido de bits.
 * \return void
*/
void I4017::SetDigito( void )
{
	if( m_indice < m_maxsalidas )
		SetClock( );
	else
		SetReset();

	m_indice++;
}
/**
 * \fn void I4017::Inicializar ( void )
 * \brief Función de Inicialización del I4017.
 * \details
 * \return void
*/
void I4017::Inicializar ( void )
{
	for ( uint8_t j = 0 ; j < m_pins4017.size() ; j++)
		m_pins4017[j]->SetDir( ) ;
}
